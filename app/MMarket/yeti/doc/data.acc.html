<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"
"http://www.w3.org/TR/html4/strict.dtd">
<html><meta http-equiv="Content-Type" content="text/html;charset=utf-8" ><style type="text/css">
.main { background: white; line-height: 130%; font-family: sans-serif }
.type { background: white; font-size: 12pt; }
.sn { font: 13pt monospace }
.vn { font-size: 13pt }
.other { background: #cccccc; display: inline; }
.field { padding: 1.5pt }
.wdoc { padding-top: 0.5em; padding-bottom: 0.4em; }
var { font: 11pt monospace }
.args { padding-left: 1.4em }
.args tr td { vertical-align: text-top }
td.arg { width: 100% }
/*.wdoc { margin-top: 0.6em; margin-bottom: 0.6em; } */
.box { border: 1px solid black;
    /* top/bottom right/left | top right/left bottom | top right bottom left */
    padding: 1px 0.1em 1pt;
    margin: 1px 1pt 0pt;
    display: inline-block; }
.module { color: #000080 }
.group { font: 16pt sans-serif; border-bottom: solid black 1px;
         padding: 0px; margin: 0.5em 0px; text-align: center }
em { color: #000080; font: bold 13pt sans-serif }
.function { background: #ffffff }
.struct { background: #ffffff }
.variant { background: #c7c7ff }
/* background: #bbffbb; */
.ft { padding-left: 0em }
.doc { background: #ffffa8;
    padding: 0.5em 0.5em 0.5em 2em;
    font-size: 12pt; }
.contents { background: #dddddd; padding: 0.5em; font-size: 10pt }
.contents a { text-decoration: none }
.contents a:hover { text-decoration: underline }
.doc p { margin: 0.6em 0px 1px; font-weight: bold }
.doc pre { background: #ffffc8;
    border: 1px dashed black;
    margin: 0.3em 1.5em 0.3em 0px;
    padding: 0.3em; overflow: auto }
</style><title>data.acc</title>
<body>
<div class="main">
<h2><span class=module>module</span> data.acc</h2>
<div class="doc">Accounting data.</div><p><div class="type"><em>typedef</em> operationT = <div class="box variant" style="display: block; margin: 2pt"><div class=field><span class=vn>AnnBu</span> <em>{</em><div class="box struct"><div id="n" class=field><span class=sn>n</span><em> is </em>string, </div>
<div id="p" class=field><span class=sn>p</span><em> is </em>number, </div>
<div id="s" class=field><span class=sn>s</span><em> is </em>number</div>
</div><em>}</em> | </div>
<div class=field><span class=vn>AnnFe</span> <em>{</em><span class=sn>a</span><em> is </em>number, <span class=sn>c</span><em> is </em>string<em>}</em> | </div>
<div class=field><span class=vn>AnnIn</span> number | </div>
<div class=field><span class=vn>AnnNd</span> <em>{</em><span class=sn>a</span><em> is </em>number, <span class=sn>c</span><em> is </em>string<em>}</em> | </div>
<div class=field><span class=vn>AnnPd</span> <em>{</em><span class=sn>a</span><em> is </em>number, <span class=sn>c</span><em> is </em>string<em>}</em> | </div>
<div class=field><span class=vn>AnnPr</span> <em>{</em><span class=sn>a</span><em> is </em>number, <span class=sn>c</span><em> is </em>string<em>}</em> | </div>
<div class=field><span class=vn>AnnSe</span> <em>{</em><div class="box struct"><div id="n" class=field><span class=sn>n</span><em> is </em>string, </div>
<div id="p" class=field><span class=sn>p</span><em> is </em>number, </div>
<div id="s" class=field><span class=sn>s</span><em> is </em>number</div>
</div><em>}</em> | </div>
<div class=field><span class=vn>AnnSt</span> <em>{</em><div class="box struct"><div id="n" class=field><span class=sn>n</span><em> is </em>string, </div>
<div id="p" class=field><span class=sn>p</span><em> is </em>number, </div>
<div id="s" class=field><span class=sn>s</span><em> is </em>number</div>
</div><em>}</em> | </div>
<div class=field><span class=vn>AnnWi</span> number</div>
</div></div><p><div class="type"><em>typedef</em> annotationT = <em>{</em><div class="box struct" style="display: block; margin: 2pt"><div id="date" class=field><span class=sn>date</span><em> is </em>string, </div>
<div id="id" class=field><span class=sn>id</span><em> is </em>number, </div>
<div id="operation" class=field><span class=sn>operation</span><em> is </em>operationT</div>
</div><em>}</em></div><p><div class="type"><em>typedef</em> pfEntryT = <em>{</em><div class="box struct" style="display: block; margin: 2pt"><div id="nick" class=field><span class=sn>nick</span><em> is </em>string, </div>
<div id="price" class=field><span class=sn>price</span><em> is </em>number, </div>
<div id="quote" class=field><span class=sn>quote</span><em> is </em>number, </div>
<div id="ref" class=field><span class=sn>ref</span><em> is </em>number, </div>
<div id="stocks" class=field><span class=sn>stocks</span><em> is </em>number</div>
</div><em>}</em></div><p><div class="type"><em>typedef</em> ledgerT = <em>{</em><div class="box struct" style="display: block; margin: 2pt"><div id="capital" class=field><span class=sn>capital</span><em> is </em>number, </div>
<div id="cash" class=field><span class=sn>cash</span><em> is </em>number, </div>
<div id="differences" class=field><span class=sn>differences</span><em> is </em>number, </div>
<div id="fees" class=field><span class=sn>fees</span><em> is </em>number, </div>
<div id="profits" class=field><span class=sn>profits</span><em> is </em>number, </div>
<div id="sells" class=field><span class=sn>sells</span><em> is </em>number, </div>
<div id="stocks" class=field><span class=sn>stocks</span><em> is </em>number</div>
</div><em>}</em></div>
<h3>Module signature</h3>
<div class="type"><em>{</em><div class="box struct" style="display: block; margin: 2pt"><div id="annotationFromJs" class="field wdoc"><span class=sn>annotationFromJs</span> <var>js</var><em> is </em>json.t &rarr; annotationT, <div class="doc">Restore an annotation JSONized.<table class="args"><tr><td><var>js</var><td>-<td class=arg>JSON value.</table></div></div>
<div id="annotationToJs" class="field wdoc"><span class=sn>annotationToJs</span> <var>ann</var><em> is </em>annotationT &rarr; json.t, <div class="doc">Returns <var>"ann"</var> JSONized.<table class="args"><tr><td><var>ann</var><td>-<td class=arg>Annotation.</table></div></div>
<div id="ledgerToJs" class="field wdoc"><span class=sn>ledgerToJs</span> <var>js</var><em> is </em>ledgerT &rarr; json.t, <div class="doc">Restore a portfolio entry JSONized.<table class="args"><tr><td><var>js</var><td>-<td class=arg>JSON value.</table></div></div>
<div id="pfEntryToJs" class="field wdoc"><span class=sn>pfEntryToJs</span> <var>e</var><em> is </em>pfEntryT &rarr; json.t, <div class="doc">Returns <var>"e"</var> JSONized.<table class="args"><tr><td><var>e</var><td>-<td class=arg>Portfolio entry.</table></div></div>
<div id="regularize" class="field wdoc"><span class=sn>regularize</span> <var>annotations</var><em> is </em>list<tt>&lt;</tt>annotationT<tt>&gt;</tt> &rarr; <em>{</em><span class=sn>errors</span><em> is </em>list<tt>&lt;</tt>string<tt>&gt;</tt>, <span class=sn>operations</span><em> is </em>list<tt>&lt;</tt>operationT<tt>&gt;</tt><em>}</em>, <div class="doc">Returns the operations to open a new year.<table class="args"><tr><td><var>annotations</var><td>-<td class=arg>Unsorted annotations.</table><p>Notes</p>Returns:
<pre>
 errors: Errors in annotations.
 operations: List of operations.
</pre></div></div>
<div id="settlement" class="field wdoc"><span class=sn>settlement</span> <var>annotations</var><em> is </em><div class="box function"><div class=field>list<tt>&lt;</tt>annotationT<tt>&gt;</tt> &rarr; </div>
<div class=field><em>{</em><div class="box struct"><div id="errors" class=field><span class=sn>`errors</span><em> is </em>list<tt>&lt;</tt>string<tt>&gt;</tt>, </div>
<div id="ledger" class=field><span class=sn>`ledger</span><em> is </em>ledgerT, </div>
<div id="portfolio" class=field><span class=sn>`portfolio</span><em> is </em>list<tt>&lt;</tt>pfEntryT<tt>&gt;</tt></div>
</div><em>}</em></div>
</div><div class="doc">Returns the ledger and portfolio after settle <var>"annotations"</var><table class="args"><tr><td><var>annotations</var><td>-<td class=arg>Unsorted annotations.</table><p>Notes</p>Returns:
<pre>
 errors: Errors in annotations.
 ledger: Ledget
 portfolio: List of portfolio entries.
</pre></div></div>
</div><em>}</em></div>
</div>
</body></html>
