<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"
"http://www.w3.org/TR/html4/strict.dtd">
<html><meta http-equiv="Content-Type" content="text/html;charset=utf-8" ><style type="text/css">
.main { background: white; line-height: 130%; font-family: sans-serif }
.type { background: white; font-size: 12pt; }
.sn { font: 13pt monospace }
.vn { font-size: 13pt }
.other { background: #cccccc; display: inline; }
.field { padding: 1.5pt }
.wdoc { padding-top: 0.5em; padding-bottom: 0.4em; }
var { font: 11pt monospace }
.args { padding-left: 1.4em }
.args tr td { vertical-align: text-top }
td.arg { width: 100% }
/*.wdoc { margin-top: 0.6em; margin-bottom: 0.6em; } */
.box { border: 1px solid black;
    /* top/bottom right/left | top right/left bottom | top right bottom left */
    padding: 1px 0.1em 1pt;
    margin: 1px 1pt 0pt;
    display: inline-block; }
.module { color: #000080 }
.group { font: 16pt sans-serif; border-bottom: solid black 1px;
         padding: 0px; margin: 0.5em 0px; text-align: center }
em { color: #000080; font: bold 13pt sans-serif }
.function { background: #ffffff }
.struct { background: #ffffff }
.variant { background: #c7c7ff }
/* background: #bbffbb; */
.ft { padding-left: 0em }
.doc { background: #ffffa8;
    padding: 0.5em 0.5em 0.5em 2em;
    font-size: 12pt; }
.contents { background: #dddddd; padding: 0.5em; font-size: 10pt }
.contents a { text-decoration: none }
.contents a:hover { text-decoration: underline }
.doc p { margin: 0.6em 0px 1px; font-weight: bold }
.doc pre { background: #ffffc8;
    border: 1px dashed black;
    margin: 0.3em 1.5em 0.3em 0px;
    padding: 0.3em; overflow: auto }
</style><title>db.serverstb</title>
<body>
<div class="main">
<h2><span class=module>module</span> db.serverstb</h2>
<div class="doc">Servers table</div><p><div class="type"><em>typedef</em> t = <em>{</em><span class=sn>lst</span><em> is </em>list<tt>&lt;</tt>server.t<tt>&gt;</tt>, <span class=sn>nextId</span><em> is </em>number<em>}</em></div>
<h3>Module signature</h3>
<div class="type"><em>{</em><div class="box struct" style="display: block; margin: 2pt"><div class=contents><a href="#add">add</a> <a href="#addNick">addNick</a> <a href="#dailyList">dailyList</a> <a href="#definedDailyConf%3F">definedDailyConf?</a> <a href="#definedHistoricConf%3F">definedHistoricConf?</a> <a href="#del">del</a> <a href="#delNick">delNick</a> <a href="#historicList">historicList</a> <a href="#init">init</a> <a href="#modify">modify</a> <a href="#modifyNickCode">modifyNickCode</a> <a href="#read">read</a> <a href="#readJs">readJs</a></div><div id="add" class="field wdoc"><span class=sn>add</span> <var>lk</var> <var>shortName</var><em> is </em>sync.t &rarr; string &rarr; boolean, <div class="doc">Adds a new server. If <var>shortName</var> is duplicated, it returns 'false'.<table class="args"><tr><td><var>lk</var><td>-<td class=arg>Synchronization lock.<tr><td><var>shortName</var><td>-<td class=arg>Server short name.</table></div></div>
<div id="addNick" class="field wdoc"><span class=sn>addNick</span> <var>lk</var> <var>nickId</var><em> is </em>sync.t &rarr; number &rarr; (), <div class="doc">Adds a new nick.<table class="args"><tr><td><var>lk</var><td>-<td class=arg>Synchronization lock.<tr><td><var>nickId</var><td>-<td class=arg>Identifier of nick to add.</table></div></div>
<div id="dailyList" class="field wdoc"><span class=sn>dailyList</span> <var>lk</var><em> is </em><div class="box function"><div class=field>sync.t &rarr; </div>
<div class=field><em>{</em><div class="box struct"><div id="selected" class=field><span class=sn>selected</span><em> is </em>number, </div>
<div id="servers" class=field><span class=sn>servers</span><em> is </em>array<tt>&lt;</tt><em>{</em><div class="box struct"><div id="codes" class=field><span class=sn>codes</span><em> is </em>list<tt>&lt;</tt><em>{</em><span class=sn>code</span><em> is </em><span class=vn>None</span> () | <span class=vn>Some</span> string, <span class=sn>nickId</span><em> is </em>number<em>}</em><tt>&gt;</tt>, </div>
<div id="dailyConf" class=field><span class=sn>`dailyConf</span><em> is </em><span class=vn>None`</span> () | <span class=vn>Some`</span> server.confT, </div>
<div id="historicConf" class=field><span class=sn>`historicConf</span><em> is </em><span class=vn>None`</span> () | <span class=vn>Some`</span> server.confT, </div>
<div id="id" class=field><span class=sn>id</span><em> is </em>number, </div>
<div id="name" class=field><span class=sn>name</span><em> is </em>string, </div>
<div id="shortName" class=field><span class=sn>shortName</span><em> is </em>string</div>
</div><em>}</em><tt>&gt;</tt></div>
</div><em>}</em></div>
</div>, <div class="doc">Returns the list of server which have activated daily configuration.<table class="args"><tr><td><var>lk</var><td>-<td class=arg>Synchronization lock.</table></div></div>
<div id="definedDailyConf?" class="field wdoc"><span class=sn>definedDailyConf?</span> <var>lk</var> <var>serverId</var><em> is </em>sync.t &rarr; number &rarr; boolean, <div class="doc">Returns true if the server <var>"serverId"</var> has defined its 'dailyConf'.<table class="args"><tr><td><var>lk</var><td>-<td class=arg>Synchronization lock.<tr><td><var>serverId</var><td>-<td class=arg>Server identifier to test.</table></div></div>
<div id="definedHistoricConf?" class="field wdoc"><span class=sn>definedHistoricConf?</span> <var>lk</var> <var>serverId</var><em> is </em>sync.t &rarr; number &rarr; boolean, <div class="doc">Returns true if the server <var>"serverId"</var> has defined its 'historicConf'.<table class="args"><tr><td><var>lk</var><td>-<td class=arg>Synchronization lock.<tr><td><var>serverId</var><td>-<td class=arg>Server identifier to test.</table></div></div>
<div id="del" class="field wdoc"><span class=sn>del</span> <var>lk</var> <var>id</var><em> is </em>sync.t &rarr; number &rarr; (), <div class="doc">Deletes a server.<table class="args"><tr><td><var>lk</var><td>-<td class=arg>Synchronization lock.<tr><td><var>id</var><td>-<td class=arg>Server identifier.</table></div></div>
<div id="delNick" class="field wdoc"><span class=sn>delNick</span> <var>lk</var> <var>nickId</var><em> is </em>sync.t &rarr; number &rarr; (), <div class="doc">Removes a nick.<table class="args"><tr><td><var>lk</var><td>-<td class=arg>Synchronization lock.<tr><td><var>nickId</var><td>-<td class=arg>Identifier of nick to add.</table></div></div>
<div id="historicList" class="field wdoc"><span class=sn>historicList</span> <var>lk</var><em> is </em><div class="box function"><div class=field>sync.t &rarr; </div>
<div class=field><em>{</em><div class="box struct"><div id="selected" class=field><span class=sn>selected</span><em> is </em>number, </div>
<div id="servers" class=field><span class=sn>servers</span><em> is </em>array<tt>&lt;</tt><em>{</em><div class="box struct"><div id="codes" class=field><span class=sn>codes</span><em> is </em>list<tt>&lt;</tt><em>{</em><span class=sn>code</span><em> is </em><span class=vn>None</span> () | <span class=vn>Some</span> string, <span class=sn>nickId</span><em> is </em>number<em>}</em><tt>&gt;</tt>, </div>
<div id="dailyConf" class=field><span class=sn>`dailyConf</span><em> is </em><span class=vn>None`</span> () | <span class=vn>Some`</span> server.confT, </div>
<div id="historicConf" class=field><span class=sn>`historicConf</span><em> is </em><span class=vn>None`</span> () | <span class=vn>Some`</span> server.confT, </div>
<div id="id" class=field><span class=sn>id</span><em> is </em>number, </div>
<div id="name" class=field><span class=sn>name</span><em> is </em>string, </div>
<div id="shortName" class=field><span class=sn>shortName</span><em> is </em>string</div>
</div><em>}</em><tt>&gt;</tt></div>
</div><em>}</em></div>
</div>, <div class="doc">Returns the list of server which have activated historic configuration and
the index of the preferred server.<table class="args"><tr><td><var>lk</var><td>-<td class=arg>Synchronization lock.</table></div></div>
<div id="init" class="field wdoc"><span class=sn>init</span> <var>parent</var><em> is </em>string &rarr; (), <div class="doc">Initializes configuration table.<table class="args"><tr><td><var>parent</var><td>-<td class=arg>Parent directory.</table></div></div>
<div id="modify" class="field wdoc"><span class=sn>modify</span> <var>lk</var> <var>server</var><em> is </em><div class="box function"><div class=field>sync.t &rarr; </div>
<div class=field><em>{</em><div class="box struct"><div id="codes" class=field><span class=sn>`codes</span><em> is </em>list<tt>&lt;</tt><em>{</em><span class=sn>`code</span><em> is </em><span class=vn>None`</span> () | <span class=vn>Some`</span> string, <span class=sn>`nickId</span><em> is </em>number<em>}</em><tt>&gt;</tt>, </div>
<div id="dailyConf" class=field><span class=sn>`dailyConf</span><em> is </em><span class=vn>None`</span> () | <span class=vn>Some`</span> server.confT, </div>
<div id="historicConf" class=field><span class=sn>`historicConf</span><em> is </em><span class=vn>None`</span> () | <span class=vn>Some`</span> server.confT, </div>
<div id="id" class=field><span class=sn>`id</span><em> is </em>number, </div>
<div id="name" class=field><span class=sn>`name</span><em> is </em>string, </div>
<div id="shortName" class=field><span class=sn>`shortName</span><em> is </em>string</div>
</div><em>}</em> &rarr; </div>
<div class=field>boolean</div>
</div>, <div class="doc">Modify data of <var>"server"</var>.<table class="args"><tr><td><var>lk</var><td>-<td class=arg>Synchronization lock.<tr><td><var>server</var><td>-<td class=arg>Server to modify.</table></div></div>
<div id="modifyNickCode" class="field wdoc"><span class=sn>modifyNickCode</span> <var>lk</var> <var>serverId</var> <var>nickId</var> <var>code</var><em> is </em><div class="box function"><div class=field>sync.t &rarr; </div>
<div class=field>number &rarr; </div>
<div class=field>number &rarr; </div>
<div class=field>string &rarr; </div>
<div class=field>()</div>
</div>, <div class="doc">Modifies <var>code</var> of a company (nick).<table class="args"><tr><td><var>lk</var><td>-<td class=arg>Synchronization lock.<tr><td><var>serverId</var><td>-<td class=arg>Identifier of server to modify.<tr><td><var>nickId</var><td>-<td class=arg>Identifier of nick to modify.<tr><td><var>code</var><td>-<td class=arg>Server code for company.</table></div></div>
<div id="read" class="field wdoc"><span class=sn>read</span> <var>lk</var><em> is </em><div class="box function"><div class=field>sync.t &rarr; </div>
<div class=field>list<tt>&lt;</tt><em>{</em><div class="box struct"><div id="codes" class=field><span class=sn>codes</span><em> is </em>list<tt>&lt;</tt><em>{</em><span class=sn>code</span><em> is </em><span class=vn>None</span> () | <span class=vn>Some</span> string, <span class=sn>nickId</span><em> is </em>number<em>}</em><tt>&gt;</tt>, </div>
<div id="dailyConf" class=field><span class=sn>`dailyConf</span><em> is </em><span class=vn>None`</span> () | <span class=vn>Some`</span> server.confT, </div>
<div id="historicConf" class=field><span class=sn>`historicConf</span><em> is </em><span class=vn>None`</span> () | <span class=vn>Some`</span> server.confT, </div>
<div id="id" class=field><span class=sn>`id</span><em> is </em>number, </div>
<div id="name" class=field><span class=sn>name</span><em> is </em>string, </div>
<div id="shortName" class=field><span class=sn>shortName</span><em> is </em>string</div>
</div><em>}</em><tt>&gt;</tt></div>
</div>, <div class="doc">Returns server list.<table class="args"><tr><td><var>lk</var><td>-<td class=arg>Synchronization lock.</table></div></div>
<div id="readJs" class="field wdoc"><span class=sn>readJs</span> <var>lk</var><em> is </em>sync.t &rarr; json.t<div class="doc">Returns server list in JSON format.<table class="args"><tr><td><var>lk</var><td>-<td class=arg>Synchronization lock.</table></div></div>
</div><em>}</em></div>
</div>
</body></html>
